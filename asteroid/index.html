<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Asteroid shader | asmgrinder’s page</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Asteroid shader" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Homepage for asmgrinder’s stuff." />
<meta property="og:description" content="Homepage for asmgrinder’s stuff." />
<link rel="canonical" href="/asteroid/" />
<meta property="og:url" content="/asteroid/" />
<meta property="og:site_name" content="asmgrinder’s page" />
<script type="application/ld+json">
{"url":"/asteroid/","headline":"Asteroid shader","description":"Homepage for asmgrinder’s stuff.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="asmgrinder's page" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">asmgrinder&#39;s page</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/asteroid/">Asteroid shader</a><a class="page-link" href="/CV/">CV</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Asteroid shader</h1>
  </header>

  <div class="post-content">
    <h3 id="unity-asteroid-shader-documentation">Unity asteroid shader documentation</h3>

<h1 id="material-shader-asteroidshadergraph">Material shader (asteroid.shadergraph)</h1>

<p>The shader gives sphere look of highly detailed asteroid. It is recommended to use subdivided enough icosphere geometry for body (its vertices are displaced during rendering, rest of mimic is done by normal mapping).
Resulting height map is sum of base heightmap and generated on the fly random heightmap. Normals for base heightmap are calculated on the fly based on heightmap.
Normals for generated heightmap are calculated approximately and combined with the base heightmap normals.</p>

<p><code class="language-plaintext highlighter-rouge">Albedo</code> - Cubemap with albedo of body.<br />
<code class="language-plaintext highlighter-rouge">Tint</code> - Overall color of body.<br />
<code class="language-plaintext highlighter-rouge">Heightmap</code> - Base heightmap of body (grayscaled cubemap).<br />
<code class="language-plaintext highlighter-rouge">Range</code> - Base heightmap scale.<br />
<code class="language-plaintext highlighter-rouge">Metallic</code> - Metalic parameter of body.<br />
<code class="language-plaintext highlighter-rouge">Smoothness</code> - Smoothness parameter of body.<br />
<code class="language-plaintext highlighter-rouge">Denoise</code> - Level of denoising when rendering surface at angle (tradeoff between normals detalization and visual artefacts). Depends on render scale.
 Weakens normals based on surface angle inside camera coordinate system.<br />
<code class="language-plaintext highlighter-rouge">Start octave</code> - scaling of first level of generated noise.
<code class="language-plaintext highlighter-rouge">Seed</code> - Random generator seed, changes generated heightmap and normals for body.<br />
<code class="language-plaintext highlighter-rouge">Use mesh normals</code> - denoise is based on the normal in camera coordinate system. For lowpoly icosphere it can give better results for precalculated vertex displacement and recalculated normals.
 This parameter lets mix normals calculated by shader (for highly detailed geometry) and used mesh normals.</p>

<h1 id="compute-shader">Compute shader</h1>

<p>Computes displaced position of surface and normal for sphere point. Requires heightmap _TexHeightmap (greyscaled cubemap),
 _StartOctave (int), _Range (float) and _Seed (float in range 0.000 .. 100.000).</p>

<h1 id="script-stonescs">Script (stones.cs)</h1>

<p>Generates rocks all over the surface of body. Some pyramid-like prefab can be used to visualize resulting normals in positions of rock instances.
Parameters of shader should be same as parameters of material to obtain same surface.</p>

<p><code class="language-plaintext highlighter-rouge">Use mesh normals</code> in the script displaces geometry of body and recalculates normals at Start() to make correct normals for same parameter of shader and
therefore requires read/write flag for mesh to be set if turned on. If turned off, does nothing.</p>

<h1 id="todo">TODO:</h1>
<ul>
  <li>Find another way to lower visual artifacts to avoid detalization loss. Probably several probes for one pixel with averaging.</li>
</ul>

<!-- C++ programmer<br/>
Programming, development

<b>Contacts</b><br/>
Email: asmgrinder@gmail.com

<b>Languages</b><br/>
Russian - mother tongue<br/>
English - can read and translate

# Job list

<i>June 2020 - Present</i><br/>
<b>At home</b><br/>Godot and Unity asteroid version, Ntix (tetris-like game based on N-tamino)

<i>September 2019 - June 2020</i><br/>
<b>Software engineer</b><br/>
<b>Ringtail Studios</b><br/>
theHunter Classic support and improvement

<i>March 2017 - August 2019</i><br/>
<b>At home</b><br/>
Improving Blender modelling skills, procedural asteroid 20+ octaves, Godot engine / OpenGL / Urho3D

<i>November 2009 - March 2017</i><br/>
<b>Votum Ltd</b>(www.votum.ru)<br/>
<b>Software engineer</b><br/>
Technique Editor application to calculate and test movements of robotic arm with 6 degrees of freedom.
Math plugin for laser rangemeter profiles collection, reprojection to 3D and correction of laser rangemeter tool.
Math plugin for calculation of railway wheels parameters.

<i>April 2006 - March 2009</i><br/>
<b>Alcost SRL</b><br/>
<b>Software engineer</b><br/>
Defragmenter engine (Defrag API + MFT scanning for fast reading of files list and
their locations). Utility to restore deleted files and partitions
(low level file system parsing, direct read of NTFS / FAT / CDFS /
UDF structures and partition tables, correction of partition table,
support for MBR / GPT).

<i>January 2004 — March 2006</i><br/>
<b>Votum SRL</b><br/>
<b>Software engineer</b><br/>
Software for ultrasonic flaw detector UD4-T. Application for determining
piezoelectric probe parameters, «Thickness meter» application,
«Resonant flaw detector» application, «Wheel pair checking»
application, «Locomotive detail checking».

<i><b>Key skills</b></i><br/>
C++11, knowlegde of Win32 API, Unity, Godot engine, basics
of DirectX / OpenGL. Technical objects modelling in Blender.
Knowledge of Windows / Ubuntu Linux / Gentoo Linux. Knowledge of
cross platform frameworks (Unity, Godot engine, Urho3D).

# Gallery

<i>Procedural asteroid, value noise, 20+ octaves, Unity, realtime.</i><br/>
![scr5.png](/images/scr5.png)

![scr10.png](/images/scr10.png)

![scr4.png](/images/scr4.png)

![scr6.png](/images/scr6.png)

<i>Procedural asteroid, value noise, 20+ octaves, Godot engine (texture shadows, auto exposure, tone mapping), realtime.</i><br/>
Project: [https://github.com/asmgrinder/godotAsteroid/](https://github.com/asmgrinder/godotAsteroid/)<br/>
![](/images/godot_asteroid.png)

Video: [https://www.youtube.com/watch?v=rMzyrzJRXeM](https://www.youtube.com/watch?v=rMzyrzJRXeM)<br/>
<iframe width="565" height="318" src="https://www.youtube.com/embed/rMzyrzJRXeM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<i>Procedural asteroid, value noise, 20+ octaves, OpenGL/Urho3D, realtime.</i><br/>
Project: [https://github.com/asmgrinder/glAsteroid](https://github.com/asmgrinder/glAsteroid/)<br/>
![](/images/gl_asteroid.png)

Video: [https://www.youtube.com/watch?v=rx2Aa9UDQPo](https://www.youtube.com/watch?v=rx2Aa9UDQPo)<br/>
<iframe width="565" height="288" src="https://www.youtube.com/embed/rx2Aa9UDQPo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<i>Space station render (Blender, Cycles)</i><br/>
![](/images/hypercube_space_station.png)

![](/images/space_tunnel.png)

<i>Ntix, tetris-like game based on N-tamino, Unity.</i><br/>
Project: https://github.com/asmgrinder/Ntix/<br>
![](/images/ntix1.png)

<i>Technique Editor</i><br/>
![](/images/technique_editor.png) -->

<!--This is the base Jekyll theme. You can find out more info about customizing your Jekyll theme, as well as basic Jekyll usage documentation at [jekyllrb.com](https://jekyllrb.com/)

You can find the source code for Minima at GitHub:
[jekyll][jekyll-organization] /
[minima](https://github.com/jekyll/minima)

You can find the source code for Jekyll at GitHub:
[jekyll][jekyll-organization] /
[jekyll](https://github.com/jekyll/jekyll)


[jekyll-organization]: https://github.com/jekyll-->

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">asmgrinder&#39;s page</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">asmgrinder&#39;s page</li><li><a class="u-email" href="mailto:asmgrinder@gmail.com">asmgrinder@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/asmgrinder"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">asmgrinder</span></a></li><li><a href="https://youtube.com/asmgrinder"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg> <span class="username">asmgrinder</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Homepage for asmgrinder&#39;s stuff.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
